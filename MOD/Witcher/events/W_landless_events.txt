namespace = landless

# Moving toward holding
character_event = {
	id = landless.1
	
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		location = {
			remove_province_modifier = prosperity_modifier_3
			
			# Find the neighboring province whose distance to target is smaller
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 5 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 10 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 25 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 50 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 100 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 150 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 200 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 250 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 300 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 350 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 400 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
			random_neighbor_province = {
				limit = {
					NOT = { terrain = magic_tower }
					event_target:target_province = {
						distance = { where = PREV value < 450 }
					}
				}
				add_province_modifier = { name = prosperity_modifier_3 duration = -1} 
				holder_scope = {
					ROOT = {
						set_defacto_liege = PREV
						force_host = PREV # Move the location in UI
					}
				}
				break = yes
			}
		}
	}
	
	option = {
		name = OK
		
		trigger = {
			location = {
				event_target:target_province = {
					province = PREV
				}
			}
		}
		# STOP
		remove_trait = travelling
	}
	
	option = {
		name = OK
		trigger = {
			location = {
				event_target:target_province = {
					NOT = { province = PREV }
				}
			}
		}
		repeat_event = { id = landless.1  days = 10 }
	}
}